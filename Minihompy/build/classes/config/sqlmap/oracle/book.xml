<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.BookDAO">
	<resultMap type="book" id="bookMap">
		<result column="BOOK_NO" property="bookNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="WRITER_USER_NO" property="writerUserNo"/>
		<result column="CONTENT" property="content"/>
		<result column="REG_DATE" property="regDate"/>
	</resultMap>
	
<!-- 	create table minihompy_book ( -->
<!-- 	book_no number primary key, -->
<!-- 	user_no number, -->
<!-- 	writer_user_no number, -->
<!-- 	content varchar2(1000) not null, -->
<!-- 	reg_date date default sysdate -->
<!-- ); -->

<!-- 전체 방명록 조회 -->
	<select id="selectBook" resultMap="bookMap">
		select * 
		  from minihompy_book
		 order by book_no desc
	</select>
	
	
	<!-- 방명록 등록 -->
	<insert id="insertBook" parameterType="book">
	    insert into minihompy_book(book_no, user_no, writer_user_no, content) 
	    values (s_minihompy_book_no.nextVal, #{userNo}, #{writerUserNo}, #{content})                               
	</insert>
	
	<!-- 방명록 수정 -->
	<update id="updateBook" parameterType="book">
		update minihompy_book
		   set
			   content = #{content}
		 where book_no = #{bookNo}
	</update>
	
	<!-- 방명록 삭제 -->
	<delete id="deleteBook" parameterType="int">
		delete from minihompy_book
		where book_no = #{bookNo}
	</delete>
</mapper>